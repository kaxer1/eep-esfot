<mat-sidenav-container class="sidenav-container">

    <mat-sidenav #drawer class="sidenav mat-elevation-z15" fixedInViewport
        [attr.role]="(isHandset$ | async) ? 'dialog' : 'navigation'" [mode]="(isHandset$ | async) ? 'over' : 'side'"
        [opened]="(isHandset$ | async) === false" (mouseenter)="mouseenter()" (mouseleave)="mouseleave()">
    
        <div class="uno">
            <img src="../../../assets/imagenes/ESFOT_LOGO.jpg" id="logo">
        </div>
  
        <mat-tree [dataSource]="dataSource" [treeControl]="treeControl" class="example-tree">
            <mat-tree-node *matTreeNodeDef="let node" matTreeNodeToggle>
                <li class="material-tree-node">
                    <ul> 
                        <a class="btn btn-sm btn-block" [ngClass]="{active: node.name == nombreSelect}" 
                            (click)="manejarEstadoActivo(node.name)" [routerLink]="[node.url]" 
                            style="text-align: left; color: rgb(255, 255, 255)">{{node.name}}</a>
                    </ul>
                </li>
            </mat-tree-node>
            <mat-nested-tree-node *matTreeNodeDef="let node; when: hasChild">
                <li>
                    <div class="tree-titulos d-flex bd-highlight" style="background: transparent">
                        <div class="bd-highlight">
                            <mat-icon mat-list-icon id="icono-menu">{{node.icono}}</mat-icon>
                        </div>
                        <div class="bd-highlight">
                            <h5 class="name-uno">{{node.name}}</h5>
                        </div>
                        <div class="ml-auto bd-highlight">
                            <button mat-icon-button matTreeNodeToggle [attr.aria-label]="'Toggle ' + node.name" >
                                <mat-icon class="mat-icon-rtl-mirror" id="icono-despliega">
                                    {{treeControl.isExpanded(node) ? 'remove' : 'add'}}
                                </mat-icon>
                            </button>
                        </div>
                    </div>
                    <ul [class.example-tree-invisible]="!treeControl.isExpanded(node)" 
                        [style.padding]="treeControl.isExpanded(node) ? '20px 0px 20px 0px' : '0px 0px 0px 0px'">
                        <ng-container matTreeNodeOutlet></ng-container>
                    </ul>
                </li>
            </mat-nested-tree-node>
        </mat-tree>

    </mat-sidenav>
  
    <mat-sidenav-content class="degradado">
        <mat-toolbar>
            <!-- Primera barra normal -->
            <mat-toolbar-row *ngIf="!barraInicial">
                <button type="button" aria-label="Toggle sidenav" mat-icon-button (click)="drawer.toggle()"
                    *ngIf="isHandset$ | async">
                    <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
                </button>

                <div class="d-flex justify-content-center" style="margin-top: 18px;">
                    <div id="avatar">
                        <span class="iniciales d-flex align-items-center justify-content-center"
                            style="margin-top: 8px;">{{iniciales}}</span>
                    </div>
                    <div class="d-flex flex-column bd-highlight" style="margin-left: 19px; margin-top: 3px;">
                        <h3 class="bd-highlight">{{UserName}}</h3>
                        <p class="bd-highlight" style="font-size: 13px; margin-top: -10px;">{{UserEmail}}</p>
                    </div>
                </div>
                        
                <span class="example-spacer"></span>
                
                <!-- Botón Logout  -->
                <button mat-mini-fab style="margin-left: 10px; background: rgba(25, 104, 223, 0.953) " (click)="loginService.logout()">
                    <mat-icon id="iconos-navegador">exit_to_app</mat-icon>
                </button>
  
            </mat-toolbar-row>

            <!-- Barra normal Modo Celular -->
            <mat-toolbar-row *ngIf="barraUno" class="d-flex justify-content-between">
                <button type="button" aria-label="Toggle sidenav" mat-icon-button (click)="drawer.toggle()"
                    *ngIf="isHandset$ | async">
                    <mat-icon aria-label="Side nav toggle icon">menu</mat-icon>
                </button>
        
                <div class="d-flex justify-content-center" style="margin-top: 18px;">
                    <div id="avatar">
                        <span class="iniciales d-flex align-items-center justify-content-center"
                            style="margin-top: 8px;">{{iniciales}}</span>
                    </div>
                    <div class="d-flex flex-column bd-highlight" style="margin-left: 19px; margin-top: 3px;">
                        <h3 class="bd-highlight">{{UserName}}</h3>
                        <p class="bd-highlight" style="font-size: 13px; margin-top: -10px;">{{UserEmail}}</p>
                    </div>
                </div>
        
                <div>
                    <button mat-icon-button [matMenuTriggerFor]="colapsado">
                        <mat-icon>more_vert</mat-icon>
                    </button>
                    <mat-menu #colapsado="matMenu">
                        <!-- Botón Configuraciones -->
                        <button mat-menu-item (click)="AbrirSettings()">
                            <mat-icon>settings</mat-icon>
                            <span>Ajustes</span>
                        </button>
                        <!-- Botón Logout  -->
                        <button mat-menu-item (click)="loginService.logout()">
                            <mat-icon>exit_to_app</mat-icon>
                            <span>Salir</span>
                        </button>
                    </mat-menu>
                </div>
        
            </mat-toolbar-row> 
        </mat-toolbar>
    
        <div style="margin-top: 25px; padding-bottom: 60px;">
            <router-outlet></router-outlet>
        </div>
        
    </mat-sidenav-content>
    
</mat-sidenav-container>
<!-- <mat-icon aria-hidden="false" aria-label="Example home icon">reorder</mat-icon>
<router-outlet></router-outlet> -->